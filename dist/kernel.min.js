/** kernel.js by AceMood@Saber-Team */
!function(a){"use strict";function b(){}function c(a,b,c){var d=[];if(H&&a.map===H)d=a.map(b,c);else if(a.length===+a.length)for(var e=0;e<a.length;++e)d.push(b.call(c||null,a[e],e,a));return d}function d(a,b,c){if(G&&a.forEach===G)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d&&b.call(c,a[d],d,a)!==K;d++);}function e(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function f(a){return L[J.call(a)]}function g(a){return void 0===a||null===a}function h(a,b){var c=M.createElement("script");c.charset="utf-8",c.async=!0,c.kernel_name=b,c.onreadystatechange=c.onload=c.onerror=function(){c.onreadystatschange=c.onload=c.onerror=null,Q=null,(!c.readyState||/complete/.test(c.readyState))&&N.removeChild(c)},c.src=a,P=c,O?N.insertBefore(c,O):N.appendChild(c),P=null}function i(){return M.getElementsByTagName("script")}function j(){return M.currentScript||P||function(){var a;return R?Q&&"interactive"===Q.readyState?Q:(a=i(),d(a,function(a){return"interactive"===a.readyState?(Q=a,K):void 0}),Q):void 0}()||function(){var a,b=null;try{throw new Error}catch(c){a=c.stack}if(!a)return b;var c=-1!==a.indexOf(" at ")?" at ":"@",e=a.indexOf(".async");if(e>-1)a=a.substring(e+7),a=a.split(c)[1],a=a.replace(/^([^\(]*\()/,"");else for(;-1!==a.indexOf(c);)a=a.substring(a.indexOf(c)+c.length);a=a.substring(0,a.indexOf(".js")+3),a=a.replace(/^([^\(]*\()/,"");var f=i();return d(f,function(c){var d=k(c);return d===a?(b=c,K):void 0}),b}()}function k(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function l(){var a=j();return a?null:k(a)}function m(a){return a=a.replace(/(\/)+/g,"/"),a=n(a)}function n(a){a=a.split("/");for(var b=0;b<a.length;++b)"."===a[b]?(a.splice(b,1),--b):".."===a[b]&&b>0&&".."!==a[b-1]&&(a.splice(b-1,2),b-=2);return a.join("/")}function o(){return t(U.href)}function p(a){return r(a)&&"."!==a.charAt(0)}function q(a){return/:\/\//.test(a)||/^\//.test(a)}function r(a){return!q(a)&&(/^(\.){1,2}\//.test(a)||"/"!==a.charAt(0))}function s(a,b){if("require"===a||"module"===a||"exports"===a)return a;p(a)&&(a=u(a),a=v(a),b=null),a=m(a);var c="/"===a.charAt(0)?"":"/",d=(b?t(b):o())+c+a;return T.test(d)||(d+=".js"),d=n(d)}function t(a){return S.test(a)?a.slice(0,-1):(a=a.split("/"),a.pop(),a.join("/"))}function u(a){var b=[];if(Z.paths){for(var c=a,d=a.split("/");!(c in Z.paths)&&d.length;)b.unshift(d.pop()),c=d.join("/");a=Z.paths[c]?Z.paths[c]:c}return a+b.join("/")}function v(a){var b=Z.packages,c="";return b&&b.length>0&&d(b,function(b){return 0===a.indexOf(b.name)?(a.length===b.name.length&&(c="/"+(b.main?b.main:"main")),a=a.replace(b.name,b.location||b.name)+c,K):void 0}),a}function w(a){this.uid=a.uid,this.id=a.id||null,this.url=a.url,this.deps=a.deps||[],this.depMods=new Array(this.deps.length),this.status=a.status||w.STATUS.init,this.factory=a.factory||b,this.exports={}}function x(a){throw Y.replace("%s",a)}function y(a,b,d){var e,g=Z.cache,h=Z.uidprefix+Z.uid++,i=l();if("string"!==f(a)&&(d=b,b=a,a=null),"array"!==f(b)&&(d=b,b=null),a){if(g.id2path[a]&&Z.debug)return Z.trigger(Z.events.ERROR,[Y.replace("%s",a),i]),x(a);g.id2path[a]=i,g.mods[a]=X}g.path2uid[i]?g.path2uid[i].push(h):g.path2uid[i]=[h],e=g.mods[h]=X,b||"function"!==f(d)||(b=[],d.length&&(d.toString().replace(W,"").replace(V,function(a,c,d){b.push(d)}),b=(1===d.length?["require"]:["require","exports","module"]).concat(b))),e=g.mods[h]=new w({uid:h,id:a,url:i,deps:b,factory:d,status:w.STATUS.init}),Z.trigger(Z.events.create,[e]);var k=j().kernel_name;k&&p(k)&&!e.id&&(e.id=k),e.deps&&e.deps.length>0&&(e.deps=c(e.deps,function(a,b){("exports"===a||"module"===a)&&(e.cjsWrapper=!0);var c=C(a,e);return c&&(e.depMods[b]=c),a})),z(e)}function z(a){var b=Z.cache,c=a.deps.length,f=Z.paths&&Z.paths[a.id]?!0:!1,g=f?U.href:l();$.add(a),b.mods[a.uid]||(b.mods[a.uid]=X),a.setStatus(w.STATUS.fetching),d(a.deps,function(d,f){if(a.depMods[f])return void--c;var i=s(d,g),j=b.path2uid[i];j&&b.mods[j[0]]&&(b.mods[j[0]].status===w.STATUS.complete||D(i,a))?(--c,a.depMods[f]=b.mods[j[0]].exports):(_[i]?e(_[i],a)<0&&_[i].push(a):_[i]=[a],ab[i]||(ab[i]=!0,h(i,d)))}),0===c&&B(a)}function A(a,b){if("object"===f(a)&&!b)return Z.config(a),null;if("array"===f(a)&&0===a.length)return"function"===f(b)?b():b;"string"===f(a)&&(a=[a]);var d,e=l();if(b){d=Z.uidprefix+Z.uid++;var g=new w({uid:d,id:null,url:e,deps:a,factory:b,status:w.STATUS.init});return g.depMods=c(a,function(a){var b=s(a,e);return C(a)||C(b)}),z(g),null}var h=s(a[0],e),i=C(a[0]);return 1===a.length&&i?i:(d=Z.cache.path2uid[h][0],Z.cache.mods[d].exports||null)}function B(a){$.remove(a),a.cjsWrapper?a.factory.apply(null,a.depMods):a.exports="function"===f(a.factory)?a.factory.apply(null,a.depMods):a.factory,g(a.exports)&&(a.exports={}),a.setStatus(w.STATUS.complete),Z.cache.mods[a.uid]=a,a.id&&(Z.cache.mods[a.id]=a);var b=_[a.url];b&&(delete _[a.url],d(b,function(b){b.ready&&b.status===w.STATUS.fetching&&b.ready(a)}))}function C(a,b){if(Z.cache.mods[a]){var c=l(),d=s(a,c);if(Z.cache.mods[a].status===w.STATUS.complete||D(d,b))return Z.cache.mods[a].exports}return"require"===a?A:"module"===a?b:"exports"===a?b&&b.exports:null}function D(a,b){var c,d=!1,f=Z.cache.path2uid[a];return f&&(c=Z.cache.mods[f[0]])&&e(_[b.url],c)>=0&&(d=!0),d}var E=Object.prototype,F=Array.prototype,G=F.forEach,H=F.map,I=E.hasOwnProperty,J=E.toString,K={},L={"[object Object]":"object","[object Array]":"array","[object Function]":"function","[object RegExp]":"regexp","[object String]":"string","[object Number]":"number"},M=document,N=M.head||M.getElementsByTagName("head")[0],O=M.getElementsByTagName("base")[0];O&&(N=O.parentNode);var P,Q,R="readyState"in M.createElement("script"),S=/\/$/g,T=/\.(js|css|tpl|txt)$/g,U=a.location;w.STATUS={init:0,loaded:1,fetching:2,complete:3},w.prototype.setStatus=function(a){if(0>a||a>4)throw"Status "+a+" is now allowed.";switch(a){case 2:Z.trigger(Z.events.startFetch,[this]);break;case 3:Z.trigger(Z.events.complete,[this])}},w.prototype.ready=function(a){var b;if(a.url){Z.paths&&Z.paths[this.id]&&(b=!0);for(var c=0;c<this.deps.length;++c){var d=s(this.deps[c],b?U.href:this.url);if(d===a.url){this.depMods[c]=a.exports;break}}}this.checkAllDepsOK()&&B(this)},w.prototype.checkAllDepsOK=function(){for(var a=!0,b=0;b<this.depMods.length;++b)if(g(this.depMods[b])){a=!1;break}return a};var V=/\brequire\s*\(\s*(["'])([^'"\s]+)\1\s*\)/g,W=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,X={id:null,uid:null,url:null,status:null,exports:{}},Y="more then one module defined with the same id: %s";y.amd={creator:"AceMood",email:"zmike86@gmail.com"},A.toUrl=function(a){return s(a)},A.async=function(a,b){A([a],b)},A.url=function(a){return a};var Z={};Z.uid=0,Z.uidprefix="AceMood@kernel_";var $={mods:{},add:function(a){this.mods[a.uid]&&Z.trigger(Z.events.error,["current mod with uid: "+a.uid+" and file path: "+a.url+" is fetching now"]),this.mods[a.uid]=a},clear:function(){this.mods={}},remove:function(a){this.mods[a.uid]&&(this.mods[a.uid]=null,delete this.mods[a.uid])}},_={},ab={};Z.config=function(a){if("object"!==f(a))throw"config object must an object";var b,c;for(b in a)if(I.call(a,b))if(Z[b])for(c in a[b])Z[b][c]=a[b][c];else Z[b]=a[b]},Z.cache={mods:{},id2path:{},path2uid:{},events:{}},Z.config({baseUrl:"",debug:!0,paths:{}}),Z.reset=function(){this.cache.mods={},this.cache.id2path={},this.cache.path2uid={}},a.require=a._req=A,a.define=a._def=y,a.kerneljs=Z,Z.events={create:"create",startFetch:"start:fetch",endFetch:"end:fetch",complete:"complete",error:"error"},Z.on=function(a,b,c){this.cache.events[a]||(this.cache.events[a]=[]),this.cache.events[a].push({handler:b,context:c})},Z.trigger=function(a,b){var c=this.cache.events[a];c&&d(c,function(a){a.handler.apply(a.context,b)})}}(this);
//# sourceMappingURL=kernel.min.map