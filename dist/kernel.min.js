/** kernel.js by AceMood@Saber-Team */
!function(a){"use strict";function b(){}function c(a){throw"more then one module defined with the same id: "+a}function d(a,b,c){var d=[];if(H&&a.map===H)d=a.map(b,c);else if(a.length===+a.length)for(var e=0;e<a.length;++e)d.push(b.call(c||null,a[e],e,a));return d}function e(a,b,c){if(G&&a.forEach===G)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d&&b.call(c,a[d],d,a)!==K;d++);}function f(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function g(a){return M[J.call(a)]}function h(a){return void 0===a||null===a}function i(a,b){var c=N.createElement("script");c.charset="utf-8",c.async=!0,c.kernel_name=b,c.onreadystatechange=c.onload=c.onerror=function(){c.onreadystatschange=c.onload=c.onerror=null,R=null,(!c.readyState||/complete/.test(c.readyState))&&O.removeChild(c)},c.src=a,Q=c,P?O.insertBefore(c,P):O.appendChild(c),Q=null}function j(){return N.getElementsByTagName("script")}function k(){return N.currentScript||Q||function(){var a;return S?R&&"interactive"===R.readyState?R:(a=j(),e(a,function(a){return"interactive"===a.readyState?(R=a,K):void 0}),R):void 0}()||function(){var a,b=null;try{throw new Error}catch(c){a=c.stack}if(!a)return b;var c=-1!==a.indexOf(" at ")?" at ":"@",d=a.indexOf(".async");if(d>-1)a=a.substring(d+7),a=a.split(c)[1],a=a.replace(/^([^\(]*\()/,"");else for(;-1!==a.indexOf(c);)a=a.substring(a.indexOf(c)+c.length);a=a.substring(0,a.indexOf(".js")+3),a=a.replace(/^([^\(]*\()/,"");var f=j();return e(f,function(c){var d=l(c);return d===a?(b=c,K):void 0}),b}()}function l(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function m(){var a=k();return a&&l(a)}function n(a){return a=a.replace(/(\/)+/g,"/"),a=o(a)}function o(a){a=a.split("/");for(var b=0;b<a.length;++b)"."===a[b]?(a.splice(b,1),--b):".."===a[b]&&b>0&&".."!==a[b-1]&&(a.splice(b-1,2),b-=2);return a.join("/")}function p(){return u(V.href)}function q(a){return s(a)&&"."!==a.charAt(0)}function r(a){return/:\/\//.test(a)||/^\//.test(a)}function s(a){return!r(a)&&(/^(\.){1,2}\//.test(a)||"/"!==a.charAt(0))}function t(a,b){if("require"===a||"module"===a||"exports"===a)return a;q(a)&&(a=v(a),a=w(a),b=null),a=n(a);var c="/"===a.charAt(0)?"":"/",d=(b?u(b):p())+c+a;return U.test(d)||(d+=".js"),d=o(d)}function u(a){return T.test(a)?a.slice(0,-1):(a=a.split("/"),a.pop(),a.join("/"))}function v(a){var b=[];if(Y.paths){for(var c=a,d=a.split("/");!(c in Y.paths)&&d.length;)b.unshift(d.pop()),c=d.join("/");a=Y.paths[c]?Y.paths[c]:c}return a+b.join("/")}function w(a){var b=Y.packages,c="";return b&&b.length>0&&e(b,function(b){return 0===a.indexOf(b.name)?(a.length===b.name.length&&(c="/"+(b.main?b.main:"main")),a=a.replace(b.name,b.location||b.name)+c,K):void 0}),a}function x(a){this.uid=a.uid,this.id=a.id||null,this.url=a.url,this.deps=a.deps||[],this.depMods=new Array(this.deps.length),this.status=a.status||x.STATUS.uninit,this.factory=a.factory||b,this.exports={}}function y(a,b,e){var f,h=Y.cache,i=Y.uidprefix+Y.uid++,j=m();if("string"!==g(a)&&(e=b,b=a,a=null),"array"!==g(b)&&(e=b,b=null),a){if(h.id2path[a]&&Y.debug)return c(a);h.id2path[a]=j,h.mods[a]=L}h.path2uid[j]?h.path2uid[j].push(i):h.path2uid[j]=[i],f=h.mods[i]=L,b||"function"!==g(e)||(b=[],e.length&&(e.toString().replace(X,"").replace(W,function(a,c,d){b.push(d)}),b=(1===e.length?["require"]:["require","exports","module"]).concat(b))),f=h.mods[i]=new x({uid:i,id:a,url:j,deps:b,factory:e,status:x.STATUS.uninit});var l=k().kernel_name;l&&q(l)&&!f.id&&(f.id=l),f.deps&&f.deps.length>0&&(f.deps=d(f.deps,function(a,b){("exports"===a||"module"===a)&&(f.cjsWrapper=!0);var c=C(a,f);return c&&(f.depMods[b]=c),a})),z(f)}function z(a){var b=Y.cache,c=a.deps.length,d=Y.paths&&Y.paths[a.id]?!0:!1,g=d?V.href:m();Z.add(a),a.status=x.STATUS.fetching,b.mods[a.uid]||(b.mods[a.uid]=L),e(a.deps,function(d,e){if(a.depMods[e])return void--c;var h=t(d,g),j=b.path2uid[h];j&&b.mods[j[0]]&&(b.mods[j[0]].status===x.STATUS.complete||D(h,a))?(--c,a.depMods[e]=b.mods[j[0]].exports):($[h]?f($[h],a)<0&&$[h].push(a):$[h]=[a],_[h]||(_[h]=!0,i(h,d)))}),0===c&&B(a)}function A(a,b){if("object"===g(a)&&!b)return Y.config(a),null;if("array"===g(a)&&0===a.length)return"function"===g(b)?b():b;"string"===g(a)&&(a=[a]);var c,e=m();if(b){c=Y.uidprefix+Y.uid++;var f=new x({uid:c,id:null,url:e,deps:a,factory:b,status:x.STATUS.uninit});return f.depMods=d(a,function(a){var b=t(a,e);return C(a)||C(b)}),z(f),null}var h=t(a[0],e),i=C(a[0]);return 1===a.length&&i?i:(c=Y.cache.path2uid[h][0],Y.cache.mods[c].exports||null)}function B(a){Z.remove(a),a.cjsWrapper?a.factory.apply(null,a.depMods):a.exports="function"===g(a.factory)?a.factory.apply(null,a.depMods):a.factory,h(a.exports)&&(a.exports={}),a.status=x.STATUS.complete,Y.cache.mods[a.uid]=a,a.id&&(Y.cache.mods[a.id]=a);var b=$[a.url];b&&(delete $[a.url],e(b,function(b){b.ready&&b.status===x.STATUS.fetching&&b.ready(a)}))}function C(a,b){if(Y.builtin[a])return Y.builtin[a];if(Y.cache.mods[a]){var c=m(),d=t(a,c);if(Y.cache.mods[a].status===x.STATUS.complete||D(d,b))return Y.cache.mods[a].exports}return"require"===a?A:"module"===a?b:"exports"===a?b&&b.exports:null}function D(a,b){var c,d=!1,e=Y.cache.path2uid[a];return e&&(c=Y.cache.mods[e[0]])&&f($[b.url],c)>=0&&(d=!0),d}var E=Object.prototype,F=Array.prototype,G=F.forEach,H=F.map,I=E.hasOwnProperty,J=E.toString,K={},L={id:null,uid:null,url:null,status:null,exports:{}},M={"[object Object]":"object","[object Array]":"array","[object Function]":"function","[object RegExp]":"regexp","[object String]":"string","[object Number]":"number"},N=document,O=N.head||N.getElementsByTagName("head")[0],P=N.getElementsByTagName("base")[0];P&&(O=P.parentNode);var Q,R,S="readyState"in N.createElement("script"),T=/\/$/g,U=/\.(js|css|tpl|txt)$/g,V=a.location;x.STATUS={uninit:0,fetching:1,loaded:2,complete:3},x.prototype.ready=function(a){var b;if(a.url){Y.paths&&Y.paths[this.id]&&(b=!0);for(var c=0;c<this.deps.length;++c){var d=t(this.deps[c],b?V.href:this.url);if(d===a.url){this.depMods[c]=a.exports;break}}}this.checkAllDepsOK()&&B(this)},x.prototype.checkAllDepsOK=function(){for(var a=!0,b=0;b<this.depMods.length;++b)if(h(this.depMods[b])){a=!1;break}return a};var W=/\brequire\s*\(\s*(["'])([^'"\s]+)\1\s*\)/g,X=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm;y.amd={creator:"AceMood",email:"zmike86@gmail.com",version:"0.9.1"},A.toUrl=function(a){return t(a)},A.async=function(a,b){A([a],b)},A.url=function(a){return a};var Y={};a.kernel&&(Y._kernel=a.kernel),Y.uid=0,Y.uidprefix="AceMood@kernel_";var Z={mods:{},add:function(a){if(this.mods[a.uid])throw"current mod with uid: "+a.uid+" and file path: "+a.url+" is fetching now";this.mods[a.uid]=a},clear:function(){this.mods={}},remove:function(a){this.mods[a.uid]&&(this.mods[a.uid]=null,delete this.mods[a.uid])}},$={},_={};Y.config=function(a){if("object"!==g(a))throw"config object must an object";var b,c;for(b in a)if(I.call(a,b))if(Y[b])for(c in a[b])Y[b][c]=a[b][c];else Y[b]=a[b]},Y.cache={mods:{},id2path:{},path2uid:{}},Y.config({baseUrl:"",debug:!0,builtin:{}}),Y.reset=function(){Y.cache={mods:{},id2path:{},path2uid:{}}},a.require=a._req=A,a.define=a._def=y,a.kernel=Y}(this);
//# sourceMappingURL=kernel.map