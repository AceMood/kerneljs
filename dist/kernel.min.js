/** kernel.js by AceMood@Saber-Team */
!function(a){"use strict";function b(){}function c(a,b,c){var d=[];if(P&&a.map===P)d=a.map(b,c);else if(a.length===+a.length)for(var e=0;e<a.length;++e)d.push(b.call(c||null,a[e],e,a));return d}function d(a,b,c){if(O&&a.forEach===O)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d&&b.call(c,a[d],d,a)!==S;d++);}function e(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function f(a){return T[R.call(a)]}function g(a){return void 0===a||null===a}function h(a){L.addImport(a),K.onload=i,$++,31===$&&(l(),$=0)}function i(){Z();var a=_.shift();return a?(Z=a[1],void h(a[0])):void(Z=null)}function j(a,b){if(L&&L.addImport||l(),L&&L.addImport)Z?_.push([a,b]):(h(a),Z=b);else{K.textContent='@import "'+a+'";';var c=setInterval(function(){try{{K.sheet.cssRules}clearInterval(c),b()}catch(a){}},10)}}function k(a,b){var c=function(){for(var a=0;a<document.styleSheets.length;a++){var f=document.styleSheets[a];if(f.href===d.href)return clearTimeout(e),b()}e=setTimeout(c,10)},d=document.createElement("link");if(d.type="text/css",d.rel="stylesheet",Y)d.onload=function(){d.onload=function(){},setTimeout(b,7)};else var e=setTimeout(c,10);d.href=a,bb.appendChild(d)}function l(){K=ab.createElement("style"),bb.appendChild(K),L=K.styleSheet||K.sheet}function m(a,b){function c(){var c,e=qb.cache,f=qb.uidprefix+qb.uid++,g=a;e.path2uid[g]?e.path2uid[g].push(f):e.path2uid[g]=[f],c=e.mods[f]={uid:f,id:null,url:a,deps:[],factory:null,status:C.STATUS.complete},qb.trigger(qb.events.create,[c]),b&&v(b)&&!c.id&&(c.id=b),rb.remove(c),c.exports={},qb.cache.mods[c.uid]=c,c.id&&(qb.cache.mods[c.id]=c);var h=sb[c.url];h&&(delete sb[c.url],d(h,function(a){a.ready&&a.status===C.STATUS.fetching&&a.ready(c)}))}var e=X?j:k;e(a,c)}function n(a,b){var d=function(){var b=db||e,d=b.kn_name,f=qb.cache.path2uid[a][0],g=qb.cache.mods[f];d&&v(d)&&!g.id&&(g.id=d),g.deps&&g.deps.length>0&&(g.deps=c(g.deps,function(a,b){/^(exports|module)$/.test(a)&&(g.cjsWrapper=!0);var c=I(a,g);return c&&(g.depMods[b]=c),a})),F(g)},e=ab.createElement("script");e.charset="utf-8",e.async=1,e.kn_name=b,e.onreadystatechange=e.onload=e.onerror=function(){(!e.readyState||/complete/.test(e.readyState))&&(eb=null,e.onreadystatschange=e.onload=e.onerror=null,bb.removeChild(e),d())},e.src=a,db=e,cb?bb.insertBefore(e,cb):bb.appendChild(e),db=null}function o(a,b){a.indexOf(".css")===a.length-4?m(a,b):n(a,b)}function p(){return ab.getElementsByTagName("script")}function q(){return document.currentScript||db||function(){var a;if(fb)return eb&&"interactive"===eb.readyState?eb:(a=p(),d(a,function(a){return"interactive"===a.readyState?(eb=a,S):void 0}),eb);var b,c=null;try{var e=new Error;throw Error.stackTraceLimit=1/0,e}catch(f){b=f.stack}if(!b)return c;var f=-1!==b.indexOf(" at ")?" at ":"@",g=b.indexOf(".async");if(g>-1)b=b.substring(g+7),b=b.split(f)[1],b=b.replace(/^([^\(]*\()/,"");else for(;-1!==b.indexOf(f);)b=b.substring(b.indexOf(f)+f.length);return b=b.substring(0,b.indexOf(".js")+3),b=b.replace(/^([^\(]*\()/,""),d(p(),function(a){var d=r(a);return d===b?(c=a,S):void 0}),c}()}function r(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function s(){var a=q();return a?r(a):null}function t(a){return a=a.replace(/(\/)+/g,jb),a=u(a)}function u(a){a=a.split(jb);for(var b=0;b<a.length;++b)a[b]===ib?(a.splice(b,1),--b):a[b]===kb&&b>0&&a[b-1]!==kb&&(a.splice(b-1,2),b-=2);return a.join(jb)}function v(a){return x(a)&&a.charAt(0)!==ib}function w(a){return/:\/\//.test(a)||/^\//.test(a)}function x(a){return!w(a)&&(/^(\.){1,2}\//.test(a)||a.charAt(0)!==jb)}function y(a,b){if("require"===a||"module"===a||"exports"===a)return a;v(a)&&(a=A(a),a=B(a),b=null),a=t(a);var c=a.charAt(0)===jb?"":jb,d=z(b?b:lb.href)+c+a;return hb.test(d)||(d+=".js"),d=u(d)}function z(a){return gb.test(a)?a.slice(0,-1):(a=a.split(jb),a.pop(),a.join(jb))}function A(a){var b=[];if(qb.paths){for(var c=a,d=a.split(jb);!(c in qb.paths)&&d.length;)b.unshift(d.pop()),c=d.join(jb);a=qb.paths[c]?qb.paths[c]:c}return a+b.join(jb)}function B(a){var b=qb.packages,c="";return b&&b.length>0&&d(b,function(b){return 0===a.indexOf(b.name)?(a.length===b.name.length&&(c=jb+(b.main?b.main:"main")),a=a.replace(b.name,b.location||b.name)+c,S):void 0}),a}function C(a){this.uid=a.uid,this.id=a.id||null,this.url=a.url,this.deps=a.deps||[],this.depMods=new Array(this.deps.length),this.status=a.status||C.STATUS.init,this.factory=a.factory||b,this.exports={}}function D(a){throw pb.replace("%s",a)}function E(a,b,c){var d,e=qb.cache,g=qb.uidprefix+qb.uid++,h=s();if("string"!==f(a)&&(c=b,b=a,a=null),"array"!==f(b)&&(c=b,b=null),a){if(e.id2path[a]&&qb.debug)return qb.trigger(qb.events.error,[pb.replace("%s",a),h]),D(a);e.id2path[a]=h,e.mods[a]=ob}e.path2uid[h]?e.path2uid[h].push(g):e.path2uid[h]=[g],b||"function"!==f(c)||(b=[],c.length&&(c.toString().replace(nb,"").replace(mb,function(a,c,d){b.push(d)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),d=e.mods[g]=new C({uid:g,id:a,url:h,deps:b,factory:c,status:C.STATUS.init}),qb.trigger(qb.events.create,[d])}function F(a){var b=qb.cache,c=a.deps.length,f=qb.paths&&qb.paths[a.id]?!0:!1,g=f?lb.href:a.url||s();rb.add(a),b.mods[a.uid]||(b.mods[a.uid]=ob),a.setStatus(C.STATUS.fetching),d(a.deps,function(d,f){if(a.depMods[f])return void--c;var h=y(d,g),i=b.path2uid[h];i&&b.mods[i[0]]&&(b.mods[i[0]].status===C.STATUS.complete||J(h,a))?(--c,a.depMods[f]=b.mods[i[0]].exports):(sb[h]?e(sb[h],a)<0&&sb[h].push(a):sb[h]=[a],tb[h]||(tb[h]=!0,o(h,d)))}),0===c&&H(a)}function G(a,b){if("object"===f(a)&&!b)return qb.config(a),null;if("array"===f(a)&&0===a.length)return"function"===f(b)?b():b;"string"===f(a)&&(a=[a]);var d,e,g=s();if(b)return d=qb.uidprefix+qb.uid++,e=new C({uid:d,id:null,url:g,deps:a,factory:b,status:C.STATUS.init}),e.depMods=c(a,function(a){var b=y(a,g);return I(a)||I(b)}),F(e),null;var h=y(a[0],g),i=I(a[0]);return 1===a.length&&i?i:(d=qb.cache.path2uid[h][0],qb.cache.mods[d].exports||null)}function H(a){rb.remove(a),a.cjsWrapper?a.factory.apply(null,a.depMods):a.exports="function"===f(a.factory)?a.factory.apply(null,a.depMods):a.factory,g(a.exports)&&(a.exports={}),a.setStatus(C.STATUS.complete),qb.cache.mods[a.uid]=a,a.id&&(qb.cache.mods[a.id]=a);var b=sb[a.url];b&&(delete sb[a.url],d(b,function(b){b.ready&&b.status===C.STATUS.fetching&&b.ready(a)}))}function I(a,b){if(qb.cache.mods[a]){var c=s(),d=y(a,c);if(qb.cache.mods[a].status===C.STATUS.complete||J(d,b))return qb.cache.mods[a].exports}return"require"===a?G:"module"===a?b:"exports"===a?b&&b.exports:null}function J(a,b){var c,d=!1,f=qb.cache.path2uid[a];return f&&(c=qb.cache.mods[f[0]])&&e(sb[b.url],c)>=0&&(d=!0),d}var K,L,M=Object.prototype,N=Array.prototype,O=N.forEach,P=N.map,Q=M.hasOwnProperty,R=M.toString,S={},T={"[object Object]":"object","[object Array]":"array","[object Function]":"function","[object RegExp]":"regexp","[object String]":"string","[object Number]":"number"},U=["Trident/([^ ;]*)","AppleWebKit/([^ ;]*)","Opera/([^ ;]*)","rv:([^ ;]*)(.*?)Gecko/([^ ;]*)","MSIEs([^ ;]*)","AndroidWebKit/([^ ;]*)"],V=new RegExp(U.join("|")),W=window.navigator.userAgent.match(V)||0,X=!1,Y=!0;W[1]||W[7]?X=W[1]-0<6||W[7]-0<=9:W[2]||W[8]?Y=!1:W[4]&&(X=W[4]-0<18);var Z,$=0,_=[],ab=document,bb=ab.head||ab.getElementsByTagName("head")[0],cb=ab.getElementsByTagName("base")[0];cb&&(bb=cb.parentNode);var db,eb,fb="readyState"in ab.createElement("script"),gb=/\/$/g,hb=/\.(js|css|tpl)$/,ib=".",jb="/",kb="..",lb=a.location;C.prototype.setStatus=function(a){if(0>a||a>4)throw"Status "+a+" is now allowed.";switch(this.status=a,a){case 0:break;case 2:qb.trigger(qb.events.startFetch,[this]);break;case 3:qb.trigger(qb.events.complete,[this])}},C.prototype.ready=function(a){var b;if(a.url){qb.paths&&qb.paths[this.id]&&(b=!0);for(var c=0;c<this.deps.length;++c){var d=y(this.deps[c],b?lb.href:this.url);if(d===a.url){this.depMods[c]=a.exports;break}}}this.checkAllDepsOK()&&H(this)},C.prototype.checkAllDepsOK=function(){for(var a=!0,b=0;b<this.depMods.length;++b)if(g(this.depMods[b])){a=!1;break}return a},C.STATUS={init:0,loaded:1,fetching:2,complete:3};var mb=/\brequire\s*\(\s*(["'])([^'"\s]+)\1\s*\)/g,nb=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ob={id:null,uid:null,url:null,status:null,exports:{}},pb="more then one module defined with the same id: %s";E.amd={creator:"AceMood",email:"zmike86@gmail.com"},G.toUrl=function(a){return y(a)},G.async=function(a,b){G([a],b)};var qb={};qb.uid=0,qb.uidprefix="AceMood@kernel_";var rb={mods:{},add:function(a){this.mods[a.uid]&&qb.trigger(qb.events.error,["current mod with uid: "+a.uid+" and file path: "+a.url+" is fetching now"]),this.mods[a.uid]=a},clear:function(){this.mods={}},remove:function(a){this.mods[a.uid]&&(this.mods[a.uid]=null,delete this.mods[a.uid])}},sb={},tb={};qb.config=function(a){if("object"!==f(a))throw"config object must an object";var b,c;for(b in a)if(Q.call(a,b))if(qb[b])for(c in a[b])qb[b][c]=a[b][c];else qb[b]=a[b]},qb.cache={mods:{},id2path:{},path2uid:{},events:{}},qb.config({baseUrl:"",debug:!0,paths:{}}),qb.reset=function(){this.cache.mods={},this.cache.id2path={},this.cache.path2uid={},this.cache.events={}},qb.url=function(a){return a},a.require=a.__r=G,a.define=a.__d=E,a.kerneljs=qb,qb.events={create:"create",startFetch:"start:fetch",endFetch:"end:fetch",complete:"complete",error:"error"},qb.on=function(a,b,c){this.cache.events[a]||(this.cache.events[a]=[]),this.cache.events[a].push({handler:b,context:c})},qb.trigger=function(a,b){var c=this.cache.events[a];c&&d(c,function(a){a.handler.apply(a.context,b)})}}(this);
//# sourceMappingURL=kernel.min.map