/** kernel.js by AceMood@Saber-Team */
!function(a){"use strict";function b(){}function c(a,b,c){if(N&&a.forEach===N)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d&&b.call(c,a[d],d,a)!==Q;d++);}function d(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function e(a){return R[P.call(a)]}function f(a,b){function c(){var c=new z({uri:a});rb.path2id[a]?rb.path2id[a].push(c.id):rb.path2id[a]=[c.id],E(c),b()}var d=bb?o:p;d(a,c)}function g(a,b){function c(){(!d.readyState||/complete/.test(d.readyState))&&(W=null,d.onreadystatschange=d.onload=d.onerror=null,kerneljs.data.debug||T.removeChild(d),d=null,b())}var d=S.createElement("script");d.charset="utf-8",d.async=1,d.onreadystatechange=d.onload=d.onerror=c,d.src=a,V=d,U?T.insertBefore(d,U):T.appendChild(d),V=null}function h(a,b){a.indexOf(".css")===a.length-4?f(a,b):g(a,b)}function i(){return S.getElementsByTagName("script")}function j(){return V||function(){var a;if(Z)return W&&"interactive"===W.readyState?W:(a=i(),c(a,function(a){return"interactive"===a.readyState?(W=a,Q):void 0}),W);var b,d=null;try{var e=new Error;throw Error.stackTraceLimit=100,e}catch(f){b=f.stack}if(!b)return d;var f=-1!==b.indexOf(" at ")?" at ":"@",g=b.indexOf(".async");if(g>-1)b=b.substring(g+7),b=b.split(f)[1],b=b.replace(/^([^\(]*\()/,"");else for(;-1!==b.indexOf(f);)b=b.substring(b.indexOf(f)+f.length);return b=b.substring(0,b.indexOf(".js")+3),b=b.replace(/^([^\(]*\()/,""),c(i(),function(a){var c=k(a);return c===b?(d=a,Q):void 0}),d}()}function k(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function l(){var a=j();return a?k(a):null}function m(a){Y.addImport(a),X.onload=n,eb++,31===eb&&(q(),eb=0)}function n(){db();var a=fb.shift();return a?(db=a[1],void m(a[0])):void(db=null)}function o(a,b){if(Y&&Y.addImport||q(),Y&&Y.addImport)db?fb.push([a,b]):(m(a),db=b);else{X.textContent='@import "'+a+'";';var c=setInterval(function(){try{{X.sheet.cssRules}clearInterval(c),b()}catch(a){}},10)}}function p(a,b){var c=function(){for(var a=0;a<S.styleSheets.length;a++){var f=S.styleSheets[a];if(f.href===d.href)return clearTimeout(e),b()}e=setTimeout(c,10)},d=S.createElement("link");if(d.type="text/css",d.rel="stylesheet",cb)d.onload=function(){d.onload=null,setTimeout(b,7)};else var e=setTimeout(c,10);d.href=a,T.appendChild(d)}function q(){X=S.createElement("style"),T.appendChild(X),Y=X.styleSheet||X.sheet}function r(a){return a=a.replace(/(\/)+/g,jb),a=s(a)}function s(a){a=a.split(jb);for(var b=0;b<a.length;++b)a[b]===ib?(a.splice(b,1),--b):a[b]===kb&&b>0&&a[b-1]!==kb&&(a.splice(b-1,2),b-=2);return a.join(jb)}function t(a){return v(a)&&a.charAt(0)!==ib}function u(a){return/:\/\//.test(a)||/^\//.test(a)}function v(a){return!u(a)&&(/^(\.){1,2}\//.test(a)||a.charAt(0)!==jb)}function w(a,b){t(a)&&(a=y(a),b=null),a=r(a);var c=a.charAt(0)===jb?"":jb,d=x(b?b:lb.href)+c+a;return hb.test(d)||(d+=".js"),d=s(d)}function x(a){if(gb.test(a))return a.slice(0,-1);var b=a.split(jb);return b.pop(),b.join(jb)}function y(a){var b=[],c=rb.data.paths;if(c){for(var d=a,e=a.split(jb);!(d in c)&&e.length;)b.unshift(e.pop()),d=e.join(jb);a=c[d]?c[d]:d}return a+b.join(jb)}function z(a){return a.id&&z._cache[a.id]&&rb.debug?(H(qb.error,[ob.replace("%s",a.id),a.uri]),A(a.id)):(this.uid=tb+sb++,this.id=a.id||this.uid,this.uri=a.uri,this.deps=a.deps||[],this.depsCount=this.deps.length,this.status=z.STATUS.init,this.factory=a.factory||null,this.exports={},this.execNow=!!a.execNow,z._cache[this.id]=this,void this.setStatus(z.STATUS.init))}function A(a){throw ob.replace("%s",a)}function B(a,b){rb.path2id[a]?rb.path2id[a].push(b):rb.path2id[a]=[b]}function C(a,c,d){var f,g=rb.data.resourceMap,h=g&&g[a],i=h?g[a].uri:l(),j=h?g[a].deps:[];if("string"!==e(a)&&(c=a,a=null),"object"===e(c))f=new z({id:a,uri:i,deps:j,factory:null}),B(i,f.id),f.exports=c,setTimeout(function(){E(f)},0);else{if("function"!==e(c))throw"define with wrong parameters in "+i;c.toString().replace(nb,"").replace(mb,function(a,b,c){j.push(c)}),f=new z({id:a,uri:i,deps:j,factory:c,execNow:!!d}),B(i,f.id),D(f,b)}}function D(a,b){ub.add(a),a.setStatus(z.STATUS.fetching),c(a.deps,function(c){var e,f,g=rb.data.resourceMap;g&&g[c]?(e=g[c].uri,f=g[c].id):(e=w(c,a.uri),f=rb.path2id[e]?rb.path2id[e][0]:null);var i=f&&z._cache[f];return i&&i.status>=z.STATUS.loaded?void a.depsCount--:(vb[e]?d(vb[e],a)<0&&vb[e].push(a):vb[e]=[a],void(wb[e]||(wb[e]=!0,h(e,b))))}),0===a.depsCount&&setTimeout(function(){E(a)},0)}function E(a){ub.remove(a),a.setStatus(z.STATUS.loaded);var b=vb[a.uri];b&&(delete vb[a.uri],c(b,function(a){a.depsCount--,a.status===z.STATUS.fetching&&a.checkAll()&&E(a)})),a.execNow&&a.compile()}function F(a,b){var c=w(a,b&&b.uri||location.href),d=rb.path2id[c]?rb.path2id[c][0]:null;return z._cache[a]||z._cache[d]||null}function G(a,b,c){pb[a]||(pb[a]=[]),pb[a].push({handler:b,context:c})}function H(a,b){var d=pb[a];d&&c(d,function(a){a.handler.apply(a.context,b)})}function I(a){if("object"!==e(a))throw"config object must an object";var b,c;for(b in a)if(O.call(a,b))if(rb.data[b])for(c in a[b])rb.data[b][c]=a[b][c];else rb.data[b]=a[b]}function J(a){var b=arguments.length;if(1>b)throw"require must have at least one parameter.";var c=F(a,null);if(c&&c.status>=z.STATUS.loaded)return c.compile(),c.exports;throw"module with id: "+a+" have not be ready"}function K(a,e,f){var g=a.length;ub.add(f),f.setStatus(z.STATUS.fetching);c(a,function(a){var c,e,i=rb.data.resourceMap;i&&i[a]?(c=i[a].uri,e=i[a].id):(c=w(a,f&&f.uri),e=rb.path2id[c]?rb.path2id[c][0]:null);var j=e&&z._cache[e];return j&&j.status>=z.STATUS.loaded?void g--:(vb[c]?d(vb[c],f)<0&&vb[c].push(f):vb[c]=[f],void(wb[c]||(wb[c]=!0,h(c,b))))}),0===g&&setTimeout(function(){E(f)},0)}var L=Object.prototype,M=Array.prototype,N=M.forEach,O=L.hasOwnProperty,P=L.toString,Q={},R={"[object Object]":"object","[object Array]":"array","[object Function]":"function","[object RegExp]":"regexp","[object String]":"string","[object Number]":"number"},S=document,T=S.head||S.getElementsByTagName("head")[0],U=S.getElementsByTagName("base")[0];U&&(T=U.parentNode);var V,W,X,Y,Z="readyState"in S.createElement("script"),$=["Trident/([^ ;]*)","AppleWebKit/([^ ;]*)","Opera/([^ ;]*)","rv:([^ ;]*)(.*?)Gecko/([^ ;]*)","MSIEs([^ ;]*)","AndroidWebKit/([^ ;]*)"],_=new RegExp($.join("|")),ab=navigator.userAgent.match(_)||0,bb=!1,cb=!0;ab[1]||ab[7]?bb=ab[1]<6||ab[7]<=9:ab[2]||ab[8]?cb=!1:ab[4]&&(bb=ab[4]<18);var db,eb=0,fb=[],gb=/\/$/g,hb=/\.(js|css|tpl|txt)$/,ib=".",jb="/",kb="..",lb=a.location;z.prototype.setStatus=function(a){if(0>a||a>4)throw"Status "+a+" is now allowed.";switch(this.status=a,a){case 0:H(qb.create,[this]);break;case 1:H(qb.fetch,[this]);break;case 2:H(qb.loaded,[this]);break;case 3:H(qb.complete,[this])}},z.prototype.checkAll=function(){return 0===this.depsCount},z.prototype.compile=function(){function a(a){var c=arguments.length;if(1>c)throw"require must have at least one parameter.";var d=F(a,b);if(d&&d.status>=z.STATUS.loaded)return d.compile(),d.exports;throw"require unknown module with id: "+a}if(this.status!==z.STATUS.complete){a.toUrl=function(a){return w(a)},a.async=function(a,c){if("function"!==e(c))throw"require.async second parameter must be a function";var d=e(a);"string"===d?K([a],c,b):"array"===d&&K(a,c,b)};var b=this;this.factory&&(this.factory.call(null,a,this.exports,this),delete this.factory),this.setStatus(z.STATUS.complete)}},z.STATUS={init:0,fetching:1,loaded:2,complete:3},z._cache={};var mb=/\brequire\s*\(\s*(["'])([^'"\s]+)\1\s*\)/g,nb=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ob="more then one module defined with the same id: %s",pb={},qb={create:"create",fetch:"fetch",loaded:"loaded",complete:"complete",error:"error"},rb={},sb=0,tb="AM@kernel_",ub={mods:{},add:function(a){this.mods[a.uid]&&H(qb.error,["current mod with uid: "+a.uid+" and file path: "+a.uri+" is fetching now"]),this.mods[a.uid]=a},clear:function(){this.mods={}},remove:function(a){this.mods[a.uid]&&(this.mods[a.uid]=null,delete this.mods[a.uid])}},vb={},wb={};rb.reset=function(){z._cache={},this.path2id={},this.data={},pb={}},rb.getCache=function(){return z._cache},rb.exec=J,rb.config=I,rb.on=G,rb.emit=H,rb.request=g,rb.eventsType=qb,rb.data={},rb.path2id={},a.kerneljs&&(rb._kernel=a.kerneljs,rb.config(rb._kernel)),a.define=a.__d=C,a.kerneljs=rb}(this);
//# sourceMappingURL=kernel.min.map