/** kernel.js by AceMood@Saber-Team */
!function(a){"use strict";function b(){}function c(a,b,c){var d=[];if(Q&&a.map===Q)d=a.map(b,c);else if(a.length===+a.length)for(var e=0;e<a.length;++e)d.push(b.call(c||null,a[e],e,a));return d}function d(a,b,c){if(P&&a.forEach===P)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d&&b.call(c,a[d],d,a)!==T;d++);}function e(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function f(a){return U[S.call(a)]}function g(a){return void 0===a||null===a}function h(a){M.addImport(a),L.onload=i,_++,31===_&&(l(),_=0)}function i(){$();var a=ab.shift();return a?($=a[1],void h(a[0])):void($=null)}function j(a,b){if(M&&M.addImport||l(),M&&M.addImport)$?ab.push([a,b]):(h(a),$=b);else{L.textContent='@import "'+a+'";';var c=setInterval(function(){try{{L.sheet.cssRules}clearInterval(c),b()}catch(a){}},10)}}function k(a,b){var c=function(){for(var a=0;a<document.styleSheets.length;a++){var f=document.styleSheets[a];if(f.href===d.href)return clearTimeout(e),b()}e=setTimeout(c,10)},d=document.createElement("link");if(d.type="text/css",d.rel="stylesheet",Z)d.onload=function(){d.onload=function(){},setTimeout(b,7)};else var e=setTimeout(c,10);d.href=a,cb.appendChild(d)}function l(){L=bb.createElement("style"),cb.appendChild(L),M=L.styleSheet||L.sheet}function m(a,b){function c(){var c,e=ob.cache,f=ob.uidprefix+ob.uid++,g=a;e.path2uid[g]?e.path2uid[g].push(f):e.path2uid[g]=[f],c=e.mods[f]={uid:f,id:null,url:a,deps:[],factory:null,status:D.STATUS.complete},ob.trigger(ob.events.create,[c]),b&&w(b)&&!c.id&&(c.id=b),pb.remove(c),c.exports={},ob.cache.mods[c.uid]=c,c.id&&(ob.cache.mods[c.id]=c);var h=qb[c.url];h&&(delete qb[c.url],d(h,function(a){a.ready&&a.status===D.STATUS.fetching&&a.ready(c)}))}var e=Y?j:k;e(a,c)}function n(a,b){function c(){}var d=bb.createElement("script");d.charset="utf-8",d.async=!0,d.kernel_name=b,d.onreadystatechange=d.onload=d.onerror=function(){(!d.readyState||/complete/.test(d.readyState))&&(fb=null,d.onreadystatschange=d.onload=d.onerror=null,cb.removeChild(d),c())},d.src=a,eb=d,db?cb.insertBefore(d,db):cb.appendChild(d),eb=null}function o(a,b){a.indexOf(".css")===a.length-4?m(a,b):n(a,b)}function p(){return bb.getElementsByTagName("script")}function q(){return bb.currentScript||eb||function(){var a;return gb?fb&&"interactive"===fb.readyState?fb:(a=p(),d(a,function(a){return"interactive"===a.readyState?(fb=a,T):void 0}),fb):void 0}()||function(){var a,b=null;try{throw new Error}catch(c){a=c.stack}if(!a)return b;var c=-1!==a.indexOf(" at ")?" at ":"@",e=a.indexOf(".async");if(e>-1)a=a.substring(e+7),a=a.split(c)[1],a=a.replace(/^([^\(]*\()/,"");else for(;-1!==a.indexOf(c);)a=a.substring(a.indexOf(c)+c.length);return a=a.substring(0,a.indexOf(".js")+3),a=a.replace(/^([^\(]*\()/,""),d(p(),function(c){var d=r(c);return d===a?(b=c,T):void 0}),b}()}function r(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function s(){var a=q();return a?r(a):null}function t(a){return a=a.replace(/(\/)+/g,"/"),a=u(a)}function u(a){a=a.split("/");for(var b=0;b<a.length;++b)"."===a[b]?(a.splice(b,1),--b):".."===a[b]&&b>0&&".."!==a[b-1]&&(a.splice(b-1,2),b-=2);return a.join("/")}function v(){return A(jb.href)}function w(a){return y(a)&&"."!==a.charAt(0)}function x(a){return/:\/\//.test(a)||/^\//.test(a)}function y(a){return!x(a)&&(/^(\.){1,2}\//.test(a)||"/"!==a.charAt(0))}function z(a,b){if("require"===a||"module"===a||"exports"===a)return a;w(a)&&(a=B(a),a=C(a),b=null),a=t(a);var c="/"===a.charAt(0)?"":"/",d=(b?A(b):v())+c+a;return ib.test(d)||(d+=".js"),d=u(d)}function A(a){return hb.test(a)?a.slice(0,-1):(a=a.split("/"),a.pop(),a.join("/"))}function B(a){var b=[];if(ob.paths){for(var c=a,d=a.split("/");!(c in ob.paths)&&d.length;)b.unshift(d.pop()),c=d.join("/");a=ob.paths[c]?ob.paths[c]:c}return a+b.join("/")}function C(a){var b=ob.packages,c="";return b&&b.length>0&&d(b,function(b){return 0===a.indexOf(b.name)?(a.length===b.name.length&&(c="/"+(b.main?b.main:"main")),a=a.replace(b.name,b.location||b.name)+c,T):void 0}),a}function D(a){this.uid=a.uid,this.id=a.id||null,this.url=a.url,this.deps=a.deps||[],this.depMods=new Array(this.deps.length),this.status=a.status||D.STATUS.init,this.factory=a.factory||b,this.exports={}}function E(a){throw nb.replace("%s",a)}function F(a,b,d){var e,g=ob.cache,h=ob.uidprefix+ob.uid++,i=s();if("string"!==f(a)&&(d=b,b=a,a=null),"array"!==f(b)&&(d=b,b=null),a){if(g.id2path[a]&&ob.debug)return ob.trigger(ob.events.error,[nb.replace("%s",a),i]),E(a);g.id2path[a]=i,g.mods[a]=mb}g.path2uid[i]?g.path2uid[i].push(h):g.path2uid[i]=[h],e=g.mods[h]=mb,b||"function"!==f(d)||(b=[],d.length&&(d.toString().replace(lb,"").replace(kb,function(a,c,d){b.push(d)}),b=(1===d.length?["require"]:["require","exports","module"]).concat(b))),e=g.mods[h]=new D({uid:h,id:a,url:i,deps:b,factory:d,status:D.STATUS.init}),ob.trigger(ob.events.create,[e]);var j=q().kernel_name;j&&w(j)&&!e.id&&(e.id=j),e.deps&&e.deps.length>0&&(e.deps=c(e.deps,function(a,b){("exports"===a||"module"===a)&&(e.cjsWrapper=!0);var c=J(a,e);return c&&(e.depMods[b]=c),a})),G(e)}function G(a){var b=ob.cache,c=a.deps.length,f=ob.paths&&ob.paths[a.id]?!0:!1,g=f?jb.href:s();pb.add(a),b.mods[a.uid]||(b.mods[a.uid]=mb),a.setStatus(D.STATUS.fetching),d(a.deps,function(d,f){if(a.depMods[f])return void--c;var h=z(d,g),i=b.path2uid[h];i&&b.mods[i[0]]&&(b.mods[i[0]].status===D.STATUS.complete||K(h,a))?(--c,a.depMods[f]=b.mods[i[0]].exports):(qb[h]?e(qb[h],a)<0&&qb[h].push(a):qb[h]=[a],rb[h]||(rb[h]=!0,o(h,d)))}),0===c&&I(a)}function H(a,b){if("object"===f(a)&&!b)return ob.config(a),null;if("array"===f(a)&&0===a.length)return"function"===f(b)?b():b;"string"===f(a)&&(a=[a]);var d,e=s();if(b){d=ob.uidprefix+ob.uid++;var g=new D({uid:d,id:null,url:e,deps:a,factory:b,status:D.STATUS.init});return g.depMods=c(a,function(a){var b=z(a,e);return J(a)||J(b)}),G(g),null}var h=z(a[0],e),i=J(a[0]);return 1===a.length&&i?i:(d=ob.cache.path2uid[h][0],ob.cache.mods[d].exports||null)}function I(a){pb.remove(a),a.cjsWrapper?a.factory.apply(null,a.depMods):a.exports="function"===f(a.factory)?a.factory.apply(null,a.depMods):a.factory,g(a.exports)&&(a.exports={}),a.setStatus(D.STATUS.complete),ob.cache.mods[a.uid]=a,a.id&&(ob.cache.mods[a.id]=a);var b=qb[a.url];b&&(delete qb[a.url],d(b,function(b){b.ready&&b.status===D.STATUS.fetching&&b.ready(a)}))}function J(a,b){if(ob.cache.mods[a]){var c=s(),d=z(a,c);if(ob.cache.mods[a].status===D.STATUS.complete||K(d,b))return ob.cache.mods[a].exports}return"require"===a?H:"module"===a?b:"exports"===a?b&&b.exports:null}function K(a,b){var c,d=!1,f=ob.cache.path2uid[a];return f&&(c=ob.cache.mods[f[0]])&&e(qb[b.url],c)>=0&&(d=!0),d}var L,M,N=Object.prototype,O=Array.prototype,P=O.forEach,Q=O.map,R=N.hasOwnProperty,S=N.toString,T={},U={"[object Object]":"object","[object Array]":"array","[object Function]":"function","[object RegExp]":"regexp","[object String]":"string","[object Number]":"number"},V=["Trident/([^ ;]*)","AppleWebKit/([^ ;]*)","Opera/([^ ;]*)","rv:([^ ;]*)(.*?)Gecko/([^ ;]*)","MSIEs([^ ;]*)","AndroidWebKit/([^ ;]*)"],W=new RegExp(V.join("|")),X=window.navigator.userAgent.match(W)||0,Y=!1,Z=!0;X[1]||X[7]?Y=X[1]-0<6||X[7]-0<=9:X[2]||X[8]?Z=!1:X[4]&&(Y=X[4]-0<18);var $,_=0,ab=[],bb=document,cb=bb.head||bb.getElementsByTagName("head")[0],db=bb.getElementsByTagName("base")[0];db&&(cb=db.parentNode);var eb,fb,gb="readyState"in bb.createElement("script"),hb=/\/$/g,ib=/\.(js|css|tpl|txt)$/g,jb=a.location;D.prototype.setStatus=function(a){if(0>a||a>4)throw"Status "+a+" is now allowed.";switch(this.status=a,a){case 0:break;case 2:ob.trigger(ob.events.startFetch,[this]);break;case 3:ob.trigger(ob.events.complete,[this])}},D.prototype.ready=function(a){var b;if(a.url){ob.paths&&ob.paths[this.id]&&(b=!0);for(var c=0;c<this.deps.length;++c){var d=z(this.deps[c],b?jb.href:this.url);if(d===a.url){this.depMods[c]=a.exports;break}}}this.checkAllDepsOK()&&I(this)},D.prototype.checkAllDepsOK=function(){for(var a=!0,b=0;b<this.depMods.length;++b)if(g(this.depMods[b])){a=!1;break}return a},D.STATUS={init:0,loaded:1,fetching:2,complete:3};var kb=/\brequire\s*\(\s*(["'])([^'"\s]+)\1\s*\)/g,lb=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,mb={id:null,uid:null,url:null,status:null,exports:{}},nb="more then one module defined with the same id: %s";F.amd={creator:"AceMood",email:"zmike86@gmail.com"},H.toUrl=function(a){return z(a)},H.async=function(a,b){H([a],b)};var ob={};ob.uid=0,ob.uidprefix="AceMood@kernel_";var pb={mods:{},add:function(a){this.mods[a.uid]&&ob.trigger(ob.events.error,["current mod with uid: "+a.uid+" and file path: "+a.url+" is fetching now"]),this.mods[a.uid]=a},clear:function(){this.mods={}},remove:function(a){this.mods[a.uid]&&(this.mods[a.uid]=null,delete this.mods[a.uid])}},qb={},rb={};ob.config=function(a){if("object"!==f(a))throw"config object must an object";var b,c;for(b in a)if(R.call(a,b))if(ob[b])for(c in a[b])ob[b][c]=a[b][c];else ob[b]=a[b]},ob.cache={mods:{},id2path:{},path2uid:{},events:{}},ob.config({baseUrl:"",debug:!0,paths:{}}),ob.reset=function(){this.cache.mods={},this.cache.id2path={},this.cache.path2uid={}},ob.url=function(a){return a},a.require=a.__r=H,a.define=a.__d=F,a.kerneljs=ob,ob.events={create:"create",startFetch:"start:fetch",endFetch:"end:fetch",complete:"complete",error:"error"},ob.on=function(a,b,c){this.cache.events[a]||(this.cache.events[a]=[]),this.cache.events[a].push({handler:b,context:c})},ob.trigger=function(a,b){var c=this.cache.events[a];c&&d(c,function(a){a.handler.apply(a.context,b)})}}(this);
//# sourceMappingURL=kernel.min.map