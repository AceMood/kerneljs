/** kernel.js by AceMood@Saber-Team */
!function(a){"use strict";function b(a,b,c){if(N&&a.forEach===N)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d&&b.call(c,a[d],d,a)!==Q;d++);}function c(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function d(a){return R[P.call(a)]}function e(a){function c(){rb[a]=!1;var c=new z({uri:a});C(a,c.id),H(c);var d=$[a];b(d,function(a){a()})}var d=cb?o:p;d(a,c)}function f(a,b){$[a]||($[a]=[]),$[a].push(b)}function g(a){function c(){if(!d.readyState||/complete/.test(d.readyState)){W=null,d.onreadystatschange=d.onload=d.onerror=null,d=null,rb[a]=!1;var c=$[a];b(c,function(a){a()})}}var d=S.createElement("script");d.charset="utf-8",d.async=1,d.crossorigin=1,d.onreadystatechange=d.onload=d.onerror=c,d.src=a,V=d,U?T.insertBefore(d,U):T.appendChild(d),V=null}function h(a,b){void 0===rb[a]?(rb[a]=!0,f(a,b),a.indexOf(".css")===a.length-4?e(a):g(a)):rb[a]?f(a,b):rb[a]===!1&&b()}function i(){return T.getElementsByTagName("script")}function j(){return V||document.currentScript||function(){var a;if(Z)return W&&"interactive"===W.readyState?W:(a=i(),b(a,function(a){return"interactive"===a.readyState?(W=a,Q):void 0}),W);var c,d=null;try{var e=new Error;throw Error.stackTraceLimit=100,e}catch(f){c=f.stack}if(!c)return d;var f=-1!==c.indexOf(" at ")?" at ":"@",g=c.indexOf(".async");if(g>-1)c=c.substring(g+7),c=c.split(f)[1],c=c.replace(/^([^\(]*\()/,"");else for(;-1!==c.indexOf(f);)c=c.substring(c.indexOf(f)+f.length);return c=c.substring(0,c.indexOf(".js")+3),c=c.replace(/^([^\(]*\()/,""),b(i(),function(a){var b=k(a);return b===c?(d=a,Q):void 0}),d}()}function k(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function l(){var a=j();return a?k(a):null}function m(a){Y.addImport(a),X.onload=n,fb++,31===fb&&(q(),fb=0)}function n(){eb();var a=gb.shift();return a?(eb=a[1],void m(a[0])):void(eb=null)}function o(a,b){if(Y&&Y.addImport||q(),Y&&Y.addImport)eb?gb.push([a,b]):(m(a),eb=b);else{X.textContent='@import "'+a+'";';var c=setInterval(function(){try{{X.sheet.cssRules}clearInterval(c),b()}catch(a){}},10)}}function p(a,b){var c=function(){for(var a=0;a<S.styleSheets.length;a++){var f=S.styleSheets[a];if(f.href===d.href)return clearTimeout(e),b()}e=setTimeout(c,10)},d=S.createElement("link");if(d.type="text/css",d.rel="stylesheet",db)d.onload=function(){d.onload=null,setTimeout(b,7)};else var e=setTimeout(c,10);d.href=a,T.appendChild(d)}function q(){X=S.createElement("style"),T.appendChild(X),Y=X.styleSheet||X.sheet}function r(a){return a=a.replace(/(\/)+/g,kb),a=s(a)}function s(a){a=a.split(kb);for(var b=0;b<a.length;++b)a[b]===jb?(a.splice(b,1),--b):a[b]===lb&&b>0&&a[b-1]!==lb&&(a.splice(b-1,2),b-=2);return a.join(kb)}function t(a){return v(a)&&a.charAt(0)!==jb}function u(a){return/:\/\//.test(a)||/^\//.test(a)}function v(a){return!u(a)&&(/^(\.){1,2}\//.test(a)||a.charAt(0)!==kb)}function w(a,b){t(a)&&(a=y(a),b=null),a=r(a);var c=a.charAt(0)===kb?"":kb,d=x(b?b:mb.href)+c+a;return ib.test(d)||(d+=".js"),s(d)}function x(a){if(hb.test(a))return a.slice(0,-1);var b=a.split(kb);return b.pop(),b.join(kb)}function y(a){var b=[],c=ub.data.paths;if(c){for(var d=a,e=a.split(kb);!(d in c)&&e.length;)b.unshift(e.pop()),d=e.join(kb);a=c[d]?c[d]:d}return a+b.join(kb)}function z(a){return a.id&&z._cache[a.id]?(J(tb.error,[pb.replace("%s",a.id),a.uri]),B(a.id)):(this.uid=wb+vb++,this.id=a.id||this.uid,this.uri=a.uri,this.deps=a.deps||[],this.depsCount=this.deps.length,this.status=z.Status.init,this.factory=a.factory||null,this.exports={},this.isEntryPoint=a.isEntryPoint,z._cache[this.id]=this,void this.setStatus(z.Status.init))}function A(a){this.uid=wb+vb++,this.id=a.id||this.uid,this.uri=a.uri,this.deps=a.deps||[],this.depsCount=this.deps.length,this.status=z.Status.init,this.factory=a.factory||null,this.isEntryPoint=a.isEntryPoint,this.setStatus(z.Status.init)}function B(a){throw pb.replace("%s",a)}function C(a,b){ub.path2id[a]?ub.path2id[a].push(b):ub.path2id[a]=[b]}function D(a,b){qb[a]?c(qb[a],b)<0&&qb[a].push(b):qb[a]=[b]}function E(a,b){var c=ub.data.resourceMap,d="js";return/^css:/.test(a)&&(d="css",a=a.replace(/^css:/,"")),c&&c[d.toUpperCase()][a]?c[d.toUpperCase()][a].uri:z._cache[a]?z._cache[a].uri:w(a,b)}function F(a,b){if(z._cache[a])return z._cache[a];var c="js";/^css:/.test(a)&&(c="css",a=a.replace(/^css:/,""));var d,e,f,g=ub.data.resourceMap;if(g&&g[c.toUpperCase()][a]){if(f=g[c.toUpperCase()][a].uri,e=a,z._cache[e])return z._cache[e]}else f=w(a,b||location.href);return d=ub.path2id[f]?ub.path2id[f][0]:null,d&&z._cache[d]?z._cache[d]:null}function G(a,b){z.define(a,b,!1)}function H(a){a.setStatus(z.Status.ready),a.isEntryPoint&&a.compile();var c=qb[a.uri];c&&(delete qb[a.uri],b(c,function(a){a.depsCount--,a.checkAll()&&a.status===z.Status.fetching&&H(a)}))}function I(a,b,c){sb[a]||(sb[a]=[]),sb[a].push({handler:b,context:c})}function J(a,c){var d=sb[a];d&&b(d,function(a){a.handler.apply(a.context,c)})}function K(a){if("object"!==d(a))throw"config object must an object";var b,c;for(b in a)if(O.call(a,b))if(ub.data[b])for(c in a[b])ub.data[b][c]=a[b][c];else ub.data[b]=a[b]}var L=Object.prototype,M=Array.prototype,N=M.forEach,O=L.hasOwnProperty,P=L.toString,Q={},R={"[object Object]":"object","[object Array]":"array","[object Function]":"function","[object String]":"string","[object Number]":"number"},S=document,T=S.head||S.getElementsByTagName("head")[0],U=S.getElementsByTagName("base")[0];U&&(T=U.parentNode);var V,W,X,Y,Z="readyState"in S.createElement("script"),$={},_=["Trident/([^ ;]*)","AppleWebKit/([^ ;]*)","Opera/([^ ;]*)","rv:([^ ;]*)(.*?)Gecko/([^ ;]*)","MSIEs([^ ;]*)","AndroidWebKit/([^ ;]*)"],ab=new RegExp(_.join("|")),bb=navigator.userAgent.match(ab)||0,cb=!1,db=!0;bb[1]||bb[7]?cb=bb[1]<6||bb[7]<=9:bb[2]||bb[8]?db=!1:bb[4]&&(cb=bb[4]<18);var eb,fb=0,gb=[],hb=/\/$/g,ib=/\.(js|css|txt)$/,jb=".",kb="/",lb="..",mb=a.location;z.prototype.setStatus=function(a){if(0>a||a>4)throw"Status "+a+" is now allowed.";0===a?(this.status=a,J(tb.create,[this])):1===a?(this.status=a,J(tb.fetch,[this])):2===a?(this.status=a,J(tb.ready,[this])):3===a&&(this.status=a,J(tb.complete,[this]))},z.prototype.checkAll=function(){return 0===this.depsCount},z.prototype.compile=function(){function a(a){var c=arguments.length;if(1>c)throw"require must have at least one parameter.";var d=F(a,b.uri);if(d&&d.status>=z.Status.ready)return d.compile(),d.exports;throw"require unknown module with id: "+a}if(this.status===z.Status.complete)return this.exports;a.toUrl=w,a.async=function(a,c){if("function"!==d(c))throw"require.async second parameter must be a function";var e=[],f=d(a);"string"===f?e=[a]:"array"===f&&(e=a);var g=new A({uri:b.uri,deps:e,factory:c,isEntryPoint:!0});g.fetch()};var b=this;return this.factory&&(this.factory.apply(null,[a,this.exports,this]),delete this.factory),this.setStatus(z.Status.complete),this.exports},z.prototype.fetch=function(){var a=this;return a.setStatus(z.Status.fetching),0===a.deps.length?void H(a):(b(a.deps,function(b){function c(){d=F(b,a.uri),0===d.deps.length?H(d):d.fetch()}var d=F(b,a.uri);if(d)D(d.uri,a),d.status>=z.Status.ready?(H(d),a.depsCount--):d.status===z.Status.init&&d.fetch();else{var e=E(b,a.uri);D(e,a),h(e,c)}}),void(a.checkAll()&&a.status<z.Status.ready&&H(a)))},z.Status={init:0,fetching:1,ready:2,complete:3},z._cache={},z.define=function(a,b,c){var e=ub.data.resourceMap,f=e&&e.JS[a];if("string"!==d(a)&&(b=a,a=null),"function"!==d(b))throw"define with wrong parameters "+b;var g,h;if(f){if(g=e.JS[a].uri,h=e.JS[a].deps,e.JS[a].css)for(var i=0;i<e.JS[a].css.length;i++)h.push("css:"+e.JS[a].css[i])}else{g=l(),h=[];var j={};b.toString().replace(ob,"").replace(nb,function(a,b,c){j[c]||(h.push(c),j[c]=!0)})}var k=new z({id:a,uri:g,deps:h,factory:b,isEntryPoint:c});C(g,k.id),c&&k.fetch()},A.prototype.setStatus=z.prototype.setStatus,A.prototype.checkAll=z.prototype.checkAll,A.prototype.fetch=z.prototype.fetch,A.prototype.compile=function(){if(this.status!==z.Status.complete){var a=this,c=[];b(a.deps,function(b){var d=F(b,a.uri);d&&d.status>=z.Status.ready&&c.push(d.compile())}),this.factory.apply(null,c),delete this.factory,this.setStatus(z.Status.complete)}};var nb=/\brequire\s*\(\s*(["'])([^'"\s]+)\1\s*\)/g,ob=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,pb="more then one module defined with the same id: %s",qb={},rb={},sb={},tb={create:"create",fetch:"fetch",ready:"ready",complete:"complete",error:"error"},ub={},vb=0,wb="AM@kernel_";ub.reset=function(){z._cache={},this.path2id={},this.data={},sb={}},ub.getCache=function(){return z._cache},ub.config=K,ub.on=I,ub.emit=J,ub.request=g,ub.eventsType=tb,ub.data={},ub.path2id={},ub.exec=function(a,b){z.define(a,b,!0)},a.kerneljs&&(ub._kernel=a.kerneljs,ub.config(ub._kernel)),a.define=a.__d=G,a.kerneljs=ub}(this);
//# sourceMappingURL=kernel.min.map